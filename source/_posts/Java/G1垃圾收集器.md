---
title: G1垃圾收集器
tags: JVM
desc: G1垃圾收集器。
keywords: JVM、G1
categories:
  - JVM
---

G1(Garbage-First)是面向服务器的垃圾收集器，满足GC停顿时间要求的同时，具备高吞吐量及高性能。

<!-- more -->

## 特点

- 并行与并发：利用多核环境优势，缩短Stop-the-world时间。
- 分代收集：保留了分代的概念。
- 整体基于“标记-整理”，局部基于“标记-复制”。

## G1垃圾收集器运行过程：

- 初始标记（会STW）：标记GC Roots能够直接关联到的对象。
- 并发标记：从GC Roots对堆中对象进行可达性分析，找出要回收的对象。可与用户程序并发执行。
- 最终标记（会STW）：对用户线程做短暂的暂停，处理并发标记结束后有引用变动的对象。
- 清理阶段（会STW）：对各个区域（Region）的回收价值和成本进行排序，根据用户期望的停顿时间来指定回收计划。

**G1收集器维护了一张优先列表，每次根据允许的收集时间，优先选择回收价值最大的区域（Region），该方式保证了G1在有限时间内尽可能高的收集效率。**
